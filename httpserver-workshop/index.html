<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello World</title>
  </head>
  <body>
    <h1>Currency Facts</h1>
    <select id="currency" name="">
      <option value="CAN">Canada</option>
      <!-- <option value="USA">USA</option> -->
      <option value="FRA">France</option>
      <option value="SPA">Spain</option>
    </select>
    <!-- can read in content, strings have methods that lets you replace strings with another string, the basics of templating -->
    <p id="contents">waiting</p>
  </body>
  <script type="text/javascript">
    // document.getElementById('select').addEventListener('change', function(evt){
    //   var country = evt.target.value;
    //   use fetch API + template string
    //   fetch('/currencies/${country}').then(function (res){
    //     return res.json().then(function(contents){
    //       var string =
    //       '1 USD = ${contents.value} ${contents.currency}';
    //       document.getElementById('contents').innerHTML = string;
    //     });
    //   });
    // });

    document.getElementById('currency').addEventListener('change', function (evt) {
      var country = evt.target.value;
      //use fetch API + template string
      fetch(`/currencies/${country}`).then(function (res) {
        return res.json().then(function (contents) {
          var string = `1 USD = ${contents.value} ${contents.currency}`;
          document.getElementById('contents').innerHTML = string;
        });
      });
    });

  </script>
</html>
